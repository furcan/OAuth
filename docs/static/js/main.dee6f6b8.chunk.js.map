{"version":3,"sources":["infrastructure/oauth/google/OAuthServiceGoogle.ts","infrastructure/oauth/OAuthServices.ts","application/constants/index.ts","application/api/Authentication.ts","presentation/pages/home/Home.tsx","index.tsx"],"names":["googleOAuth2Instance","oAuthServiceGoogleInitAndLoadAndGetInstance","clientId","uxMode","redirectUrl","Promise","resolve","reject","scriptId","window","document","getElementById","script","scriptRange","createRange","selectNode","head","scriptFragment","createContextualFragment","appendChild","getScript","onload","gapi","load","auth2","init","client_id","cookie_policy","fetch_basic_profile","scope","ux_mode","redirect_uri","getAuthInstance","oAuthServiceGoogleIsSignedIn","isSignedIn","get","googleReturnData","authResponse","currentUser","getAuthResponse","basicProfile","getBasicProfile","id","getId","name","getName","given_name","getGivenName","family_name","getFamilyName","image_url","getImageUrl","email","getEmail","oAuthServiceGoogleSignInAsync","a","signIn","Error","oAuthServiceGoogleSignOutAsync","signOut","undefined","OAuthService","Google","signInAsync","signOutAsync","constants","Auth","signInWithGoogleAsync","oAuthInitGoogle","process","googleResponse","Object","localStorage","setItem","setTimeout","then","dummy","Home","signInInit","useMemo","isLoading","isError","isSuccess","useState","signInState","setSignInState","userInit","isAuthenticated","avatar","userState","setUserState","useEffect","userName","getItem","userAvatar","length","signInHandlerGoogleAsync","signOutHandlerAsync","dummyErrorHandler","title","description","className","src","width","height","alt","type","onClick","stroke","fill","strokeWidth","viewBox","xmlns","fillRule","clipRule","d","disabled","Date","getFullYear","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.dee6f6b8.chunk.js","sourcesContent":["// IOAuthServiceGoogle Interfaces: begin\r\ninterface IGoogleAuthResponse {\r\n  access_token: string;\r\n  expires_at: number;\r\n  expires_in: number;\r\n  first_issued_at: number;\r\n  id_token: string;\r\n  idpId: string;\r\n  login_hint: string;\r\n  scope: string;\r\n  token_type: string;\r\n  session_state: {\r\n    extraQueryParams: {\r\n      authuser: string;\r\n    };\r\n  };\r\n}\r\n\r\ninterface IGoogleGetBasicProfile {\r\n  getId: () => string;\r\n  getName: () => string;\r\n  getGivenName: () => string;\r\n  getFamilyName: () => string;\r\n  getImageUrl: () => string;\r\n  getEmail: () => string;\r\n}\r\n\r\ninterface IGoogleBasicProfile {\r\n  id: string;\r\n  name: string;\r\n  given_name: string;\r\n  family_name: string;\r\n  image_url: string;\r\n  email: string;\r\n}\r\n\r\ntype TGoogleLoadCallback = (...args: []) => void;\r\n\r\ntype TGoogleLoadConfig = {\r\n  callback: TGoogleLoadCallback,\r\n  onerror?: () => void,\r\n  timeout?: number,\r\n  ontimeout?: () => void,\r\n};\r\n\r\ntype TGoogleLoad = (apiName: string, callback: TGoogleLoadConfig | TGoogleLoadCallback) => void;\r\n\r\ninterface IGoogleInit {\r\n  client_id: string;\r\n  cookie_policy: string;\r\n  fetch_basic_profile: boolean;\r\n  scope: string;\r\n  ux_mode?: string;\r\n  redirect_uri?: string;\r\n  response_type?: string;\r\n}\r\n\r\ntype TGoogleInit = ({ }: IGoogleInit) => void;\r\n\r\ntype TGoogleAuth2 = {\r\n  init: TGoogleInit;\r\n  getAuthInstance: () => IGoogleOAuth2Instance;\r\n};\r\n\r\ninterface IGoogleCurrentUserGet {\r\n  getAuthResponse: () => IGoogleAuthResponse;\r\n  getBasicProfile: () => IGoogleGetBasicProfile;\r\n}\r\n\r\ninterface IGoogleCurrentUser {\r\n  get: () => IGoogleCurrentUserGet;\r\n}\r\n\r\ninterface IGoogleIsSignedIn {\r\n  get: () => boolean;\r\n}\r\n\r\ninterface IGoogleOAuth2Instance {\r\n  currentUser: IGoogleCurrentUser;\r\n  isSignedIn: IGoogleIsSignedIn;\r\n  signIn: () => Promise<void>;\r\n  signOut: () => Promise<undefined>;\r\n}\r\n\r\ninterface IGoogleGapi {\r\n  load: TGoogleLoad;\r\n  auth2: TGoogleAuth2;\r\n}\r\n\r\ndeclare global {\r\n  interface Window { gapi: IGoogleGapi; }\r\n}\r\n// IOAuthServiceGoogle Interfaces: end\r\n\r\n\r\n// IOAuthServiceGoogle: begin\r\nlet googleOAuth2Instance: IGoogleOAuth2Instance | null = null;\r\n\r\ninterface IOAuthServiceGoogleInit {\r\n  clientId: string;\r\n  uxMode?: 'popup' | 'redirect';\r\n  redirectUrl?: string;\r\n}\r\nconst oAuthServiceGoogleInitAndLoadAndGetInstance = ({ clientId, uxMode, redirectUrl }: IOAuthServiceGoogleInit): Promise<boolean> => new Promise((resolve, reject) => {\r\n  const scriptId = 'OAuthGoogleScriptElement';\r\n  if (!window.document.getElementById(scriptId)) {\r\n    // create script range and append to the doc head\r\n    const script = `<script id=\"${scriptId}\" src=\"https://apis.google.com/js/api:client.js\"></script>`;\r\n    const scriptRange = window.document.createRange();\r\n    scriptRange.selectNode(window.document.head);\r\n    const scriptFragment = scriptRange.createContextualFragment(script);\r\n    window.document.head.appendChild(scriptFragment);\r\n\r\n    // get script\r\n    const getScript = window.document.getElementById(scriptId);\r\n\r\n    // check script\r\n    if (getScript) {\r\n      // listen script onload\r\n      getScript.onload = () => {\r\n        // load gapi\r\n        window.gapi.load('auth2', () => {\r\n          // init gapi\r\n          window.gapi.auth2.init({\r\n            client_id: clientId,\r\n            cookie_policy: 'single_host_origin',\r\n            fetch_basic_profile: true,\r\n            scope: 'profile email',\r\n            ux_mode: uxMode || 'popup',\r\n            redirect_uri: redirectUrl,\r\n          });\r\n\r\n          // set gapi instance\r\n          googleOAuth2Instance = window.gapi.auth2.getAuthInstance();\r\n\r\n          // resolve\r\n          resolve(true);\r\n        });\r\n      };\r\n    } else {\r\n      reject(false);\r\n    }\r\n  } else if (googleOAuth2Instance) {\r\n    resolve(true);\r\n  } else {\r\n    reject(false);\r\n  }\r\n});\r\n\r\ntype TOAuthServiceGoogleIsSignedIn = boolean;\r\nexport const oAuthServiceGoogleIsSignedIn = (): TOAuthServiceGoogleIsSignedIn => {\r\n  return googleOAuth2Instance !== null && googleOAuth2Instance.isSignedIn.get();\r\n};\r\n\r\ntype TOAuthServiceGoogleSignIn = {\r\n  authResponse: IGoogleAuthResponse;\r\n  basicProfile: IGoogleBasicProfile;\r\n} | null;\r\nconst googleReturnData = (): TOAuthServiceGoogleSignIn => {\r\n  if (googleOAuth2Instance) {\r\n    const authResponse: IGoogleAuthResponse = googleOAuth2Instance.currentUser.get().getAuthResponse();\r\n    const basicProfile: IGoogleGetBasicProfile = googleOAuth2Instance.currentUser.get().getBasicProfile();\r\n    return {\r\n      authResponse,\r\n      basicProfile: {\r\n        id: basicProfile.getId(),\r\n        name: basicProfile.getName(),\r\n        given_name: basicProfile.getGivenName(),\r\n        family_name: basicProfile.getFamilyName(),\r\n        image_url: basicProfile.getImageUrl(),\r\n        email: basicProfile.getEmail(),\r\n      },\r\n    };\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const oAuthServiceGoogleSignInAsync = async ({ clientId, uxMode, redirectUrl }: IOAuthServiceGoogleInit): Promise<TOAuthServiceGoogleSignIn> => {\r\n  if (!oAuthServiceGoogleIsSignedIn()) {\r\n    try {\r\n      const go = await oAuthServiceGoogleInitAndLoadAndGetInstance({ clientId, uxMode, redirectUrl });\r\n      if (go && googleOAuth2Instance) {\r\n        await googleOAuth2Instance.signIn();\r\n        return googleReturnData();\r\n      } else {\r\n        throw Error();\r\n      }\r\n    } catch {\r\n      return null;\r\n    }\r\n  } else if (googleOAuth2Instance) {\r\n    return googleReturnData();\r\n  }\r\n  return null;\r\n};\r\n\r\ntype TOAuthServiceGoogleSignOut = boolean;\r\nexport const oAuthServiceGoogleSignOutAsync = async (): Promise<TOAuthServiceGoogleSignOut> => {\r\n  if (oAuthServiceGoogleIsSignedIn() && googleOAuth2Instance) {\r\n    try {\r\n      const signOut = await googleOAuth2Instance.signOut();\r\n      if (signOut === undefined) {\r\n        return true;\r\n      } else {\r\n        throw Error();\r\n      }\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n// IOAuthServiceGoogle: end\r\n\r\n// IOAuthServiceGoogle Types: begin\r\nexport type {\r\n  IOAuthServiceGoogleInit,\r\n  TOAuthServiceGoogleIsSignedIn,\r\n  TOAuthServiceGoogleSignIn,\r\n  TOAuthServiceGoogleSignOut,\r\n};\r\n// IOAuthServiceGoogle Types: end\r\n","import {\r\n  oAuthServiceGoogleIsSignedIn,\r\n  oAuthServiceGoogleSignInAsync,\r\n  oAuthServiceGoogleSignOutAsync,\r\n  IOAuthServiceGoogleInit,\r\n} from 'infrastructure/oauth/google/OAuthServiceGoogle';\r\n\r\nexport class OAuthService {\r\n  static Google = class {\r\n    isSignedIn = oAuthServiceGoogleIsSignedIn;\r\n    signInAsync = oAuthServiceGoogleSignInAsync;\r\n    signOutAsync = oAuthServiceGoogleSignOutAsync;\r\n  };\r\n}\r\n\r\nexport type {\r\n  IOAuthServiceGoogleInit,\r\n};\r\n","interface IConstants {\r\n  apiUrl: string;\r\n  apiUrlPathAuth: string;\r\n  oAuthGoogleClientId: string;\r\n  oAuthGoogleUxMode: 'popup' | 'redirect';\r\n  oAuthGoogleRedirectUrl: string;\r\n}\r\n\r\nexport const constants: IConstants = {\r\n  apiUrl: 'https://api.furcan.net/',\r\n  apiUrlPathAuth: 'authentication',\r\n  oAuthGoogleClientId: '998329239587-roe4rd0tdif2j6ia7r1qjgugf4mut1vg.apps.googleusercontent.com',\r\n  oAuthGoogleUxMode: 'popup',\r\n  oAuthGoogleRedirectUrl: process.env.PUBLIC_URL,\r\n};\r\n","import { OAuthService, IOAuthServiceGoogleInit } from 'infrastructure/oauth/OAuthServices';\r\n\r\n// import { IApiResponse } from 'application/api';\r\nimport { constants } from 'application/constants';\r\n\r\nexport class Auth {\r\n  signInWithGoogleAsync = async (): Promise<boolean> => {\r\n    try {\r\n      await new OAuthService.Google().signOutAsync();\r\n\r\n      const oAuthInitGoogle: IOAuthServiceGoogleInit = {\r\n        clientId: constants.oAuthGoogleClientId,\r\n        uxMode: constants.oAuthGoogleUxMode,\r\n        redirectUrl: process.env.PUBLIC_URL,\r\n      };\r\n\r\n      const googleResponse = await new OAuthService.Google().signInAsync(oAuthInitGoogle);\r\n\r\n      if (googleResponse instanceof Object) {\r\n\r\n        /*\r\n        * Send the data to the API\r\n        *\r\n        const idToken = googleResponse.authResponse.id_token; // etc...\r\n        const apiRequestBody = { idToken: idToken };\r\n        const apiResponse = await window.fetch((constants.apiUrl + constants.apiUrlPathAuth), {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(apiRequestBody),\r\n        });\r\n        const apiResponseData: IApiResponse | boolean = apiResponse.ok ? await apiResponse.json() : false;\r\n        if (apiResponseData instanceof Object && apiResponseData.success) {\r\n          // functions, etc...\r\n          console.log(apiResponseData.innderData);\r\n          return true;\r\n        } else {\r\n          throw Error();\r\n        }\r\n        */\r\n\r\n        // Dummy: Begin\r\n        window.localStorage.setItem('dummy_user_name', googleResponse.basicProfile.name);\r\n        window.localStorage.setItem('dummy_user_avatar', googleResponse.basicProfile.image_url);\r\n        return true;\r\n        // Dummy: End\r\n\r\n      } else {\r\n        throw Error();\r\n      }\r\n    } catch {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  signOutAsync = async (): Promise<boolean> => {\r\n    try {\r\n      await new OAuthService.Google().signOutAsync();\r\n\r\n      const dummy = await new Promise((resolve) => setTimeout(() => resolve(true), 500)).then(() => {\r\n        window.localStorage.setItem('dummy_user_name', '');\r\n        window.localStorage.setItem('dummy_user_avatar', '');\r\n        return true;\r\n      });\r\n      return dummy;\r\n\r\n    } catch {\r\n      return false;\r\n    }\r\n  };\r\n}\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\n\r\nimport { Auth } from 'application/api';\r\n\r\nimport 'presentation/pages/home/Home.scss';\r\n\r\ninterface IHomeState {\r\n  isLoading: boolean;\r\n  isError: boolean;\r\n  isSuccess: boolean;\r\n}\r\ninterface IHomeUser {\r\n  isAuthenticated: boolean,\r\n  name: string;\r\n  avatar: string;\r\n}\r\n\r\nfunction Home(): React.ReactElement {\r\n  // State: begin\r\n  const signInInit: IHomeState = useMemo(() => ({\r\n    isLoading: false,\r\n    isError: false,\r\n    isSuccess: false,\r\n  }), []);\r\n  const [signInState, setSignInState] = useState<IHomeState>(signInInit);\r\n\r\n  const userInit: IHomeUser = useMemo(() => ({\r\n    isAuthenticated: false,\r\n    name: '',\r\n    avatar: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AQMAAAADqqSRAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAANQTFRF29vbVWvwgwAAABdJREFUeJxjYBgFo2AUjIJRMApGAb0BAAeAAAE5TYQiAAAAAElFTkSuQmCC',\r\n  }), []);\r\n  const [userState, setUserState] = useState<IHomeUser>(userInit);\r\n\r\n  useEffect(() => {\r\n    if (signInState.isSuccess) {\r\n      // refresh the context, or the main state, or etc...\r\n\r\n      // Dummy: begin\r\n      const userName = window.localStorage.getItem('dummy_user_name') || '';\r\n      const userAvatar = window.localStorage.getItem('dummy_user_avatar') || '';\r\n      setUserState({\r\n        isAuthenticated: userName.length > 0 && userAvatar.length > 0,\r\n        name: userName,\r\n        avatar: userAvatar || userInit.avatar,\r\n      });\r\n      // Dummy: end\r\n    }\r\n  }, [signInState, setUserState, userInit]);\r\n  // State: end\r\n\r\n  // Google OAuth Handler: begin\r\n  const signInHandlerGoogleAsync = async () => {\r\n    try {\r\n      setSignInState({\r\n        isLoading: true,\r\n        isError: false,\r\n        isSuccess: false,\r\n      });\r\n\r\n      const apiResponse = await new Auth().signInWithGoogleAsync();\r\n      if (apiResponse) {\r\n        setSignInState({\r\n          isLoading: false,\r\n          isError: false,\r\n          isSuccess: true,\r\n        });\r\n      } else {\r\n        throw Error();\r\n      }\r\n    } catch {\r\n      setSignInState({\r\n        isLoading: false,\r\n        isError: true,\r\n        isSuccess: false,\r\n      });\r\n    }\r\n  };\r\n  // Google OAuth Handler: end\r\n\r\n  // SignOut Handler: begin\r\n  const signOutHandlerAsync = async () => {\r\n    try {\r\n      setSignInState({\r\n        isLoading: true,\r\n        isError: false,\r\n        isSuccess: false,\r\n      });\r\n\r\n      const apiResponse = await new Auth().signOutAsync();\r\n      if (apiResponse) {\r\n        setSignInState({\r\n          isLoading: false,\r\n          isError: false,\r\n          isSuccess: true,\r\n        });\r\n      } else {\r\n        throw Error();\r\n      }\r\n    } catch {\r\n      setSignInState({\r\n        isLoading: false,\r\n        isError: true,\r\n        isSuccess: false,\r\n      });\r\n    }\r\n  };\r\n  // SignOut Handler: end\r\n\r\n  // Dummy Error Handler: begin\r\n  const dummyErrorHandler = () => {\r\n    setSignInState({\r\n      ...signInState,\r\n      isError: true,\r\n    });\r\n  };\r\n  // Dummy Error Handler: end\r\n\r\n  const title = userState.isAuthenticated ? userState.name : (signInState.isError ? 'Upss...' : 'Sign In');\r\n  const description = userState.isAuthenticated ? 'Welcome.' : (signInState.isError ? 'Something went wrong.... Please try again.' : (signInState.isLoading ? 'Please wait...' : 'You can sign in using one of the services below.'));\r\n\r\n  return (\r\n    <div className={`home`}>\r\n      <div className={`container`}>\r\n        <div className={`home__content`}>\r\n          <div className={`home__signin`}>\r\n            <div className={`home__signin__banner ${userState.isAuthenticated ? 'state--authenticated' : ''}`}>\r\n              <img className={`home__signin__banner__img`} src={`${process.env.PUBLIC_URL}/content/images/signin.png`} width=\"640\" height=\"420\" alt=\"OAuth\" />\r\n              <img className={`home__signin__banner__avatar`} width=\"100\" height=\"100\" alt={userState.name} src={userState.avatar} />\r\n            </div>\r\n\r\n            <h1 className={`home__signin__title`}>{title}</h1>\r\n            <p className={`home__signin__description`}>{description}</p>\r\n\r\n            <div className={`home__signin__content ${signInState.isLoading ? 'state--loading' : ''}`}>\r\n              <div className={`home__signin__content__loading`}>\r\n                <p className={`home__signin__content__loading__message`}>Please wait...</p>\r\n              </div>\r\n\r\n              {userState.isAuthenticated ?\r\n                <button className={`home__signin__content__button button--google`} type=\"button\" onClick={signOutHandlerAsync}>\r\n                  <svg stroke=\"currentColor\" fill=\"currentColor\" strokeWidth=\"0\" viewBox=\"0 0 16 16\" className={`home__signin__content__button__icon icon--signout`} height=\"20\" width=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M11.02 3.77v1.56l1-.99V2.5l-.5-.5h-9l-.5.5v.486L2 3v10.29l.36.46 5 1.72L8 15v-1h3.52l.5-.5v-1.81l-1-1V13H8V4.71l-.33-.46L4.036 3h6.984v.77zM7 14.28l-4-1.34V3.72l4 1.34v9.22zm6.52-5.8H8.55v-1h4.93l-1.6-1.6.71-.7 2.47 2.46v.71l-2.49 2.48-.7-.7 1.65-1.65z\"></path></svg>\r\n                  <span>Sign Out</span>\r\n                </button>\r\n                :\r\n                <>\r\n                  <button className={`home__signin__content__button button--google`} type=\"button\" onClick={signInHandlerGoogleAsync}>\r\n                    <svg className={`home__signin__content__button__icon icon--google`} width=\"22\" height=\"22\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><g><path fill=\"#FBBB00\" d=\"M113.47,309.408L95.648,375.94l-65.139,1.378C11.042,341.211,0,299.9,0,256\tc0-42.451,10.324-82.483,28.624-117.732h0.014l57.992,10.632l25.404,57.644c-5.317,15.501-8.215,32.141-8.215,49.456 C103.821,274.792,107.225,292.797,113.47,309.408z\"></path><path fill=\"#518EF8\" d=\"M507.527,208.176C510.467,223.662,512,239.655,512,256c0,18.328-1.927,36.206-5.598,53.451\tc-12.462,58.683-45.025,109.925-90.134,146.187l-0.014-0.014l-73.044-3.727l-10.338-64.535\tc29.932-17.554,53.324-45.025,65.646-77.911h-136.89V208.176h138.887L507.527,208.176L507.527,208.176z\"></path><path fill=\"#28B446\" d=\"M416.253,455.624l0.014,0.014C372.396,490.901,316.666,512,256,512\tc-97.491,0-182.252-54.491-225.491-134.681l82.961-67.91c21.619,57.698,77.278,98.771,142.53,98.771 c28.047,0,54.323-7.582,76.87-20.818L416.253,455.624z\"></path><path fill=\"#F14336\" d=\"M419.404,58.936l-82.933,67.896c-23.335-14.586-50.919-23.012-80.471-23.012 c-66.729,0-123.429,42.957-143.965,102.724l-83.397-68.276h-0.014C71.23,56.123,157.06,0,256,0 C318.115,0,375.068,22.126,419.404,58.936z\"></path></g></svg>\r\n                    <span>Sign in with Google</span>\r\n                  </button>\r\n\r\n                  <button className={`home__signin__content__button button--facebook`} type=\"button\" onClick={dummyErrorHandler}>\r\n                    <svg className={`home__signin__content__button__icon icon--facebook`} fill=\"#4267B2\" width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><g><path d=\"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z\"></path></g></svg>\r\n                    <span>Sign in with Facebook</span>\r\n                  </button>\r\n\r\n                  <button className={`home__signin__content__button button--apple`} type=\"button\" onClick={dummyErrorHandler} disabled>\r\n                    <svg className={`home__signin__content__button__icon icon--apple`} fill=\"#000000\" width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><g><path d=\"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z\"></path></g></svg>\r\n                    <span>Sign in with Apple</span>\r\n                  </button>\r\n                </>\r\n              }\r\n            </div>\r\n\r\n            <div className={`home__signin__footer`}>\r\n              <p className={`home__signin__footer__text`}>{`Copyright ${new Date().getFullYear()} OAuth. All rights reserved.`}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Home from 'presentation/pages/home/Home';\r\n\r\nimport 'presentation/styles/index.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Home />\r\n  </React.StrictMode>,\r\n  document.getElementById('OAuth'),\r\n);\r\n"],"sourceRoot":""}